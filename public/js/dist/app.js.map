{"version":3,"file":"app.js","sources":["../src/app.js","../src/App.js","../src/views/item/activity.js","../src/views/item/login.js","../src/views/item/map.js","../src/views/item/start.js","../src/views/item/timeline.js","../src/views/collection/activities.js","../src/models/activity.js","../src/models/location.js","../src/models/user.js","../src/collections/activities.js","../src/collections/locations.js","../src/controllers/main.js","../src/routers/default.js"],"names":["Application","Marionette","addRegions","mainRegion","View","Layout","Composite","Collection","Item","Router","Model","Controller","addInitializer","Parse","initialize","FacebookUtils","init","appId","channelUrl","cookie","xfbml","router","Default","Backbone","history","start","$","window","load","Activity","ItemView","extend","className","Login","template","JST","login","events","click .login","event","preventDefault","logIn","success","location","hash","error","console","log","Map","map","this","options","listenTo","renderUser","collection","renderActivities","on","renderMap","undefined","length","markers","forEach","activity","get","image","latLng","google","maps","LatLng","latitude","longitude","marker","Marker","position","title","icon","push","setPosition","setCenter","styles","elementType","stylers","saturation","featureType","color","visibility","mapOptions","zoom","center","disableDefaultUI","$el","find","Start","click #start","navigate","Timeline","timeline","Activities","CollectionView","childView","Object","Location","defaults","watchInterval","fetch","onSuccess","coords","data","set","deferred","resolve","onError","reject","jQuery","Deferred","promise","done","fail","complete","always","navigator","geolocation","getCurrentPosition","_","bind","watch","interval","setInterval","unwatch","clearInterval","User","model","Locations","distanceUpdate","userLatLng","locationLatitude","locationLongitude","locationLatLng","distance","geometry","spherical","computeDistanceBetween","trigger","closest","threshold","filter","Main","index","current","loginView","show","startView","query","Query","include","mapView","then","timelineView","alert","AppRouter","onDistanceUpdate","locations","closestLocation","onClosestLocation","currentLocation","user","save","onActivitySave","userLocation","processAppRoutes"],"mappings":"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"}