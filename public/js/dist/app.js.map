{"version":3,"file":"app.js","sources":["../src/App.js","../src/views/item/activity.js","../src/views/item/login.js","../src/views/item/map.js","../src/views/item/start.js","../src/views/item/timeline-activity.js","../src/views/item/timeline.js","../src/views/collection/activites.js","../src/views/collection/timeline.js","../src/models/activity.js","../src/models/location.js","../src/models/user.js","../src/collections/activities.js","../src/collections/locations.js","../src/controllers/main.js","../src/routers/default.js"],"names":["Application","Marionette","addRegions","mainRegion","View","Layout","Composite","Collection","Item","Router","Model","Controller","addInitializer","Parse","initialize","FacebookUtils","init","appId","channelUrl","cookie","xfbml","router","Default","Backbone","history","start","$","window","load","Activity","ItemView","extend","className","Login","template","JST","login","events","click .login","event","preventDefault","logIn","success","location","hash","error","console","log","Map","map","markers","click .tab","this","options","listenTo","renderUser","collection","renderActivities","renderActivity","on","renderMap","activity","get","undefined","latLng","google","maps","LatLng","latitude","longitude","marker","Marker","position","title","icon","push","markerLenth","length","path","Polyline","getPosition","geodesic","strokeColor","strokeOpacity","strokeWeight","setMap","onDomRefresh","addClass","toggleTab","evt","type","currentTarget","data","removeClass","navigate","forEach","setPosition","setCenter","styles","elementType","stylers","saturation","featureType","color","visibility","mapOptions","zoom","center","disableDefaultUI","$el","find","Start","click #start","TimelineActivity","timelineItem","model","Timeline","timeline","Activities","CollectionView","childView","CompositeView","childViewContainer","Object","Location","defaults","watchInterval","fetch","onSuccess","coords","set","deferred","resolve","onError","reject","jQuery","Deferred","promise","done","fail","complete","always","navigator","geolocation","getCurrentPosition","_","bind","watch","interval","setInterval","unwatch","clearInterval","User","Locations","distanceUpdate","userLatLng","locationLatitude","locationLongitude","locationLatLng","distance","geometry","spherical","computeDistanceBetween","trigger","closest","threshold","filter","Main","index","current","loginView","show","startView","activities","mapView","timelineView","AppRouter","onDistanceUpdate","locations","closestLocation","currentLocation","onClosestLocation","user","save","then","onActivitySave","add","userLocation","query","Query","include","equalTo","processAppRoutes"],"mappings":"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"}