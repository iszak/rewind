{"version":3,"file":"app.js","sources":["../src/app.js","../src/App.js","../src/views/item/activity.js","../src/views/item/login.js","../src/views/item/map.js","../src/views/item/start.js","../src/views/item/timeline-activity.js","../src/views/item/timeline.js","../src/views/collection/activites.js","../src/views/collection/timeline.js","../src/models/activity.js","../src/models/location.js","../src/models/user.js","../src/collections/activities.js","../src/collections/locations.js","../src/controllers/main.js","../src/routers/default.js"],"names":["Application","Marionette","addRegions","mainRegion","View","Layout","Composite","Collection","Item","Router","Model","Controller","addInitializer","Parse","initialize","FacebookUtils","init","appId","channelUrl","cookie","xfbml","router","Default","Backbone","history","start","$","window","load","Activity","ItemView","extend","className","Login","template","JST","login","events","click .login","event","preventDefault","logIn","success","location","hash","error","console","log","Map","map","markers","click .tab","this","options","listenTo","renderUser","collection","renderActivities","renderActivity","on","renderMap","activity","get","undefined","latLng","google","maps","LatLng","latitude","longitude","marker","Marker","position","title","icon","push","onDomRefresh","addClass","toggleTab","evt","type","currentTarget","data","removeClass","navigate","length","forEach","setPosition","setCenter","styles","elementType","stylers","saturation","featureType","color","visibility","mapOptions","zoom","center","disableDefaultUI","$el","find","Start","click #start","TimelineActivity","timeline","Timeline","Activities","CollectionView","childView","Timline","Object","updateACL","user","acl","id","write","read","setACL","Location","defaults","watchInterval","fetch","onSuccess","coords","set","deferred","resolve","onError","reject","jQuery","Deferred","promise","done","fail","complete","always","navigator","geolocation","getCurrentPosition","_","bind","watch","interval","setInterval","unwatch","clearInterval","User","model","Locations","distanceUpdate","userLatLng","locationLatitude","locationLongitude","locationLatLng","distance","geometry","spherical","computeDistanceBetween","trigger","closest","threshold","filter","Main","index","current","loginView","show","startView","activities","mapView","query","Query","include","timelineView","AppRouter","alert","onDistanceUpdate","locations","closestLocation","onClosestLocation","currentLocation","save","then","onActivitySave","add","userLocation","processAppRoutes"],"mappings":"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"}