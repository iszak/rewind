{"version":3,"file":"app.js","sources":["../src/App.js","../src/views/item/activity.js","../src/views/item/login.js","../src/views/item/map.js","../src/views/item/start.js","../src/views/item/timeline-activity.js","../src/views/collection/activites.js","../src/views/collection/timeline.js","../src/models/activity.js","../src/models/location.js","../src/models/user.js","../src/collections/activities.js","../src/collections/locations.js","../src/controllers/main.js","../src/routers/default.js"],"names":["Application","Marionette","addRegions","mainRegion","View","Layout","Composite","Collection","Item","Router","Model","Controller","addInitializer","Parse","initialize","FacebookUtils","init","appId","channelUrl","cookie","xfbml","router","Default","Backbone","history","start","$","window","load","Activity","ItemView","extend","className","Login","template","JST","login","events","click .login","event","preventDefault","logIn","success","location","hash","error","console","log","Map","map","markers","click .tab","this","options","listenTo","renderUser","collection","renderActivities","renderActivity","on","renderMap","activity","get","undefined","latLng","google","maps","LatLng","latitude","longitude","marker","Marker","position","title","icon","push","onDomRefresh","addClass","toggleTab","evt","type","currentTarget","data","removeClass","navigate","length","forEach","setPosition","setCenter","styles","elementType","stylers","saturation","featureType","color","visibility","mapOptions","zoom","center","disableDefaultUI","$el","find","Start","click #start","TimelineActivity","timelineItem","Activities","CollectionView","childView","Timeline","CompositeView","timeline","Object","Location","defaults","watchInterval","fetch","onSuccess","coords","set","deferred","resolve","onError","reject","jQuery","Deferred","promise","done","fail","complete","always","navigator","geolocation","getCurrentPosition","_","bind","watch","interval","setInterval","unwatch","clearInterval","User","model","Locations","distanceUpdate","userLatLng","locationLatitude","locationLongitude","locationLatLng","distance","geometry","spherical","computeDistanceBetween","trigger","closest","threshold","filter","Main","index","current","loginView","show","startView","activities","mapView","timelineView","AppRouter","alert","onDistanceUpdate","locations","closestLocation","currentLocation","onClosestLocation","user","save","then","onActivitySave","add","userLocation","query","Query","include","equalTo","processAppRoutes"],"mappings":"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"}