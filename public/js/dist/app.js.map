{"version":3,"file":"app.js","sources":["../src/App.js","../src/views/item/activity.js","../src/views/item/login.js","../src/views/item/map.js","../src/views/item/start.js","../src/views/collection/activities.js","../src/models/activity.js","../src/models/location.js","../src/models/user.js","../src/collections/activities.js","../src/collections/locations.js","../src/controllers/main.js","../src/routers/default.js"],"names":["Application","Marionette","addRegions","mainRegion","View","Layout","Composite","Collection","Item","Router","Model","Controller","addInitializer","Parse","initialize","FacebookUtils","init","appId","channelUrl","cookie","xfbml","router","Default","Backbone","history","start","$","window","load","Activity","ItemView","extend","className","Login","template","JST","login","events","click .login","event","preventDefault","logIn","success","location","hash","error","alert","Map","map","this","on","renderMap","updateMap","options","get","latLng","google","maps","LatLng","marker","Marker","position","title","setCenter","styles","elementType","stylers","saturation","featureType","color","visibility","mapOptions","zoom","center","disableDefaultUI","$el","find","onShow","fetch","done","_","bind","Start","Activities","CollectionView","childView","render","Handlebars","compile","html","Object","Location","defaults","latitude","longitude","watchInterval","onSuccess","coords","data","set","deferred","resolve","onError","reject","jQuery","Deferred","promise","fail","complete","always","navigator","geolocation","getCurrentPosition","watch","interval","setInterval","unwatch","clearInterval","User","model","Locations","updateUserLocation","userLocation","updateUserLatLng","calculateDistances","userLatLng","forEach","calculateDistance","locationLatitude","locationLongitude","locationLatLng","distance","geometry","spherical","computeDistanceBetween","closest","threshold","filter","Main","index","current","navigate","loginView","show","startView","collection","query","Query","then","mapView","timeline","activitiesView","AppRouter","onLocationsLoad","onLocationChange","locations","closestLocation","console","log","toJSON","processAppRoutes"],"mappings":"AAAA,GAAIA,aAAc,GAAIC,YAAWD,WAEjCA,aAAYE,YAAYC,WAAY,UAEpCH,YAAYI,MACRC,UACAC,aACAC,cACAC,SAGJR,YAAYO,cACZP,YAAYS,UACZT,YAAYU,SAEZV,YAAYW,cAMZX,YAAYY,eAAe,WACvBC,MAAMC,WAAW,2CAA4C,4CAE7DD,MAAME,cAAcC,MAChBC,MAAa,mBACbC,WAAa,6CACbC,QAAa,EACbC,OAAa,MAMrBpB,YAAYY,eAAe,WACvBZ,YAAYqB,OAAS,GAAIrB,aAAYS,OAAOa,UAIhDtB,YAAYY,eAAe,WACvBW,SAASC,QAAQC,UAIrBC,EAAEC,QAAQC,KAAK,WACX5B,YAAYyB,UC7ChBzB,YAAYI,KAAKI,KAAKqB,SAAWN,SAAStB,WAAW6B,SAASC,QAC1DC,UAAW,aCDfhC,YAAYI,KAAKI,KAAKyB,MAAQV,SAAStB,WAAW6B,SAASC,QAEvDG,SAAUC,IAAIC,MAEdtB,WAAY,aAIZuB,QACIC,eAAgB,SAWpBF,MAAO,SAASG,GACZA,EAAMC,iBAEN3B,MAAME,cAAc0B,MAAM,SACtBC,QAAS,WACNf,OAAOgB,SAASC,KAAO,QAE1BC,MAAO,WACHC,MAAM,uEC5BtB9C,YAAYI,KAAKI,KAAKuC,IAAMxB,SAAStB,WAAW6B,SAASC,QACrDC,UAAW,MAEXE,SAAUC,IAAIa,IAEdlC,WAAY,WACRmC,KAAKC,GAAG,OAAQD,KAAKE,WACrBF,KAAKC,GAAG,OAAQD,KAAKG,YAKzBA,UAAW,WACP,GAA8C,OAA1CH,KAAKI,QAAQV,SAASW,IAAI,YAA9B,CAKA,GAAIC,GAAS,GAAIC,QAAOC,KAAKC,OACzBT,KAAKI,QAAQV,SAASW,IAAI,YAC1BL,KAAKI,QAAQV,SAASW,IAAI,aAG9BL,MAAKU,OAAS,GAAIH,QAAOC,KAAKG,QAC1BC,SAAUN,EACVP,IAAKC,KAAKD,IACVc,MAAO,iBAGXb,KAAKD,IAAIe,UAAUR,KAIvBJ,UAAW,WAEP,GAAIa,KAEAC,YAAe,gBACfC,UACIC,WAAc,QAGlBC,YAAe,OACfF,UACIG,MAAS,YACTC,WAAc,iBAGlBF,YAAe,YACfF,UACIG,MAAS,cAGbJ,YAAe,SACfC,UACII,WAAc,UAGlBF,YAAe,MACfF,UACII,WAAc,UAGlBF,YAAe,kBACfF,UACII,WAAc,aAMlBC,GACAC,KAAM,GACNC,OAAQ,GAAIjB,QAAOC,KAAKC,OACpB,WACC,OAELM,OAAQA,EACRU,kBAAkB,EAGtBzB,MAAKD,IAAM,GAAIQ,QAAOC,KAAKV,IACvBE,KAAK0B,IAAIC,KAAK,eAAetB,IAAI,GACjCiB,IAKRM,OAAQ,WACJ,GAAIlC,GAAWM,KAAKI,QAAQV,QAEK,QAA7BA,EAASW,IAAI,aACbX,EAASmC,QAAQC,KACbC,EAAEC,KAAKhC,KAAKG,UAAWH,UC7FvCjD,YAAYI,KAAKI,KAAK0E,MAAQ3D,SAAStB,WAAW6B,SAASC,QAEvDG,SAAUC,IAAIV,MAEdX,WAAY,aAIZuB,YCRJrC,YAAYI,KAAKG,WAAW4E,WAAa5D,SAAStB,WAAWmF,eAAerD,QACxEC,UAAW,aAEXqD,UAAWrF,YAAYI,KAAKyB,SAE5ByD,OAAQ,WACJ,GAAIpD,GAAWqD,WAAWC,QAAQ9D,EAAE,wBAAwB+D,OAE5DxC,MAAK0B,IAAIc,KAAKvD,MCRtBlC,YAAYU,MAAMmB,SAAWhB,MAAM6E,OAAO3D,QACtCC,UAAW,aCDfhC,YAAYU,MAAMiF,SAAW9E,MAAM6E,OAAO3D,QACtCC,UAAW,WAEX4D,UACIC,SAAY,KACZC,UAAY,MAIhBC,cAAe,KAGfjB,MAAO,SAASzB,GAuBZ,QAAS2C,GAAUnC,GACf,GAAIgC,GAAWhC,EAASoC,OAAOJ,SAC3BC,EAAYjC,EAASoC,OAAOH,UAE5BI,GACAL,SAAUA,EACVC,UAAWA,EAIf7C,MAAKkD,IAAID,GAGTE,EAASC,QAAQH,GAIrB,QAASI,GAAQzD,GAEbuD,EAASG,OAAO1D,GAzCpB,GAAIuD,GAAW,GAAII,QAAOC,SAGtBC,EAAUN,EAASM,SAiDvB,OA9CArD,GAAUA,IAAYA,MAGlBA,EAAQX,SACRgE,EAAQ3B,KAAK1B,EAAQX,SAGrBW,EAAQR,OACR6D,EAAQC,KAAKtD,EAAQR,OAGrBQ,EAAQuD,UACRF,EAAQG,OAAOxD,EAAQuD,UA4B3BE,UAAUC,YAAYC,mBAClBhC,EAAEC,KAAKe,EAAW/C,MAClB+B,EAAEC,KAAKqB,EAASrD,OAIbyD,GAIXO,MAAO,SAASC,GACZjE,KAAK8C,cAAgBoB,YACjBnC,EAAEC,KAAKhC,KAAK6B,MAAO7B,MACnBiE,IAKRE,QAAS,WACLC,cAAcpE,KAAK8C,kBC9E3B/F,YAAYU,MAAM4G,KAAOzG,MAAM6E,OAAO3D,QAClCC,UAAW,SCDfhC,YAAYO,WAAW4E,WAAatE,MAAMN,WAAWwB,QACjDC,UAAW,WACXuF,MAAOvH,YAAYU,MAAMmB,WCF7B7B,YAAYO,WAAWiH,UAAY3G,MAAMN,WAAWwB,QAChDC,UAAW,WACXuF,MAAOvH,YAAYU,MAAMiF,SAGzB8B,mBAAoB,SAASC,GACzBzE,KAAK0E,iBAAiBD,GACtBzE,KAAK2E,sBAITD,iBAAkB,SAASD,GACvBzE,KAAK4E,WAAa,GAAIrE,QAAOC,KAAKC,OAC9BgE,EAAapE,IAAI,YACjBoE,EAAapE,IAAI,eAKzBsE,mBAAoB,WAClB3E,KAAK6E,QAAQ7E,KAAK8E,kBAAmB9E,OAIvC8E,kBAAmB,SAASpF,GACxB,GAAIkF,GAAa5E,KAAK4E,WAElBG,EAAmBrF,EAASW,IAAI,YAAYuC,SAC5CoC,EAAoBtF,EAASW,IAAI,YAAYwC,UAE7CoC,EAAiB,GAAI1E,QAAOC,KAAKC,OACjCsE,EACAC,GAGAE,EAAW3E,OAAOC,KAAK2E,SAASC,UAAUC,uBAC5CT,EACAK,EAGFvF,GAASwD,IAAI,WAAYgC,IAI7BI,QAAS,SAASC,GACd,GAAID,GAAUtF,KAAKwF,OAAO,SAAS9F,GAC/B,MAAOA,GAASW,IAAI,YAAckF,GAGtC,OAAOD,GAAQ,MCjDvBvI,YAAYW,WAAW+H,KAAOzI,WAAWU,WAAWoB,QAQhD4G,MAAO,WACE9H,MAAMyG,KAAKsB,UAGZ5I,YAAYqB,OAAOwH,SAAS,UAAU,GAFtC7I,YAAYqB,OAAOwH,SAAS,UAAU,IAW9CzG,MAAO,WACH,GAAI0G,GAAY,GAAI9I,aAAYI,KAAKI,KAAKyB,KAC1CjC,aAAYG,WAAW4I,KAAKD,IAQhCrH,MAAO,WACH,GAAIuH,GAAY,GAAIhJ,aAAYI,KAAKI,KAAK0E,KAC1ClF,aAAYG,WAAW4I,KAAKC,IAQhChG,IAAK,WACD,GAAIL,GAAWM,KAAKI,QAAQV,SAExBsG,EAAa,GAAIjJ,aAAYO,WAAW4E,WACxCoC,EAAQ,GAAIvH,aAAYU,MAAMmB,QAElCoH,GAAWC,MAAQ,GAAIrI,OAAMsI,MAAMnJ,YAAYU,MAAMmB,SAGrD,IAAI6E,GAAUuC,EAAWnE,OAEzB4B,GAAQ0C,KAAK,WACT,GAAIC,GAAU,GAAIrJ,aAAYI,KAAKI,KAAKuC,KACpCkG,WAAYA,EACZtG,SAAUA,EACV4E,MAAOA,GAGXvH,aAAYG,WAAW4I,KAAKM,IAC7B,SAASxG,GACRC,MAAMD,MAUdyG,SAAU,WACN,GAAIL,GAAa,GAAIjJ,aAAYO,WAAW4E,WACxCoC,EAAQ,GAAIvH,aAAYU,MAAMmB,QAElCoH,GAAWC,MAAQ,GAAIrI,OAAMsI,MAAMnJ,YAAYU,MAAMmB,SAErD,IAAI6E,GAAUuC,EAAWnE,OAEzB4B,GAAQ0C,KAAK,WACT,GAAIG,GAAiB,GAAIvJ,aAAYI,KAAKG,WAAW4E,YACjD8D,WAAYA,EACZ1B,MAAOA,GAGXvH,aAAYG,WAAW4I,KAAKQ,IAC7B,SAAS1G,GACRC,MAAMD,QCvFlB7C,YAAYS,OAAOa,QAAUC,SAAStB,WAAWuJ,UAAUzH,QACvDjB,WAAY,WAKR,QAASwF,GAAQzD,GACbC,MAAMD,GAGV,QAAS4G,KACL9G,EAASO,GAAG,SAAUwG,GACtB/G,EAASsE,MAAM,KAGnB,QAASyC,GAAiBhC,GACtBiC,EAAUlC,mBAAmBC,EAE7B,IAAIkC,GAAkBD,EAAUpB,QAC5B,IAGJsB,SAAQC,IAAIF,EAAgBG,UApBhC,GAAIpH,GAAW,GAAI3C,aAAYU,MAAMiF,SACjCgE,EAAY,GAAI3J,aAAYO,WAAWiH,SAuB3CmC,GAAU7E,QAAQsE,KACdpE,EAAEC,KAAKwE,EAAiBxG,MACxB+B,EAAEC,KAAKqB,EAASrD,MA4BpB,IAAII,IACAV,SAAUA,EAGdM,MAAK+G,iBACD,GAAIhK,aAAYW,WAAW+H,KAAKrF,IAE5B,GAAI,QACJL,IAAO,MACPZ,MAAQ,QACRX,MAAS,QACT6H,SAAY"}