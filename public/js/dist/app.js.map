{"version":3,"file":"app.js","sources":["../src/App.js","../src/views/item/activity.js","../src/views/item/login.js","../src/views/item/map.js","../src/views/item/start.js","../src/views/item/timeline-activity.js","../src/views/collection/activites.js","../src/views/collection/timeline.js","../src/models/activity.js","../src/models/location.js","../src/models/user.js","../src/collections/activities.js","../src/collections/locations.js","../src/controllers/main.js","../src/routers/default.js"],"names":["Application","Marionette","addRegions","mainRegion","View","Layout","Composite","Collection","Item","Router","Model","Controller","addInitializer","Parse","initialize","FacebookUtils","init","appId","channelUrl","cookie","xfbml","router","Default","Backbone","history","start","$","window","load","Activity","ItemView","extend","className","Login","template","JST","login","events","click .login","event","preventDefault","logIn","success","location","hash","error","console","log","Map","map","markers","this","options","listenTo","renderUser","collection","renderActivities","renderActivity","on","renderMap","activity","get","undefined","latLng","google","maps","LatLng","latitude","longitude","marker","Marker","position","title","icon","push","length","forEach","setPosition","setCenter","styles","elementType","stylers","saturation","featureType","color","visibility","mapOptions","zoom","center","disableDefaultUI","$el","find","Start","click #start","navigate","TimelineActivity","timeline","Activities","CollectionView","childView","Timline","Object","updateACL","user","acl","id","write","read","setACL","Location","defaults","watchInterval","fetch","onSuccess","coords","data","set","deferred","resolve","onError","reject","jQuery","Deferred","promise","done","fail","complete","always","navigator","geolocation","getCurrentPosition","_","bind","watch","interval","setInterval","unwatch","clearInterval","User","model","Locations","distanceUpdate","userLatLng","locationLatitude","locationLongitude","locationLatLng","distance","geometry","spherical","computeDistanceBetween","trigger","closest","threshold","filter","Main","index","current","loginView","show","startView","activities","mapView","query","Query","include","timelineView","AppRouter","alert","onDistanceUpdate","locations","closestLocation","onClosestLocation","currentLocation","save","then","onActivitySave","add","userLocation","processAppRoutes"],"mappings":"AAAA,GAAIA,aAAc,GAAIC,YAAWD,WAEjCA,aAAYE,YAAYC,WAAY,UAEpCH,YAAYI,MACRC,UACAC,aACAC,cACAC,SAGJR,YAAYO,cACZP,YAAYS,UACZT,YAAYU,SAEZV,YAAYW,cAMZX,YAAYY,eAAe,WACvBC,MAAMC,WAAW,2CAA4C,4CAE7DD,MAAME,cAAcC,MAChBC,MAAa,mBACbC,WAAa,6CACbC,QAAa,EACbC,OAAa,MAMrBpB,YAAYY,eAAe,WACvBZ,YAAYqB,OAAS,GAAIrB,aAAYS,OAAOa,UAIhDtB,YAAYY,eAAe,WACvBW,SAASC,QAAQC,UAIrBC,EAAEC,QAAQC,KAAK,WACX5B,YAAYyB,UC7ChBzB,YAAYI,KAAKI,KAAKqB,SAAWN,SAAStB,WAAW6B,SAASC,QAC1DC,UAAW,aCDfhC,YAAYI,KAAKI,KAAKyB,MAAQV,SAAStB,WAAW6B,SAASC,QAEvDG,SAAUC,IAAIC,MACdJ,UAAW,SAEXlB,WAAY,aAIZuB,QACIC,eAAgB,SAWpBF,MAAO,SAASG,GACZA,EAAMC,iBAEN3B,MAAME,cAAc0B,MAAM,SACtBC,QAAS,WACNf,OAAOgB,SAASC,KAAO,UAE1BC,MAAO,WACHC,QAAQC,IAAI,eC7B5B/C,YAAYI,KAAKI,KAAKwC,IAAMzB,SAAStB,WAAW6B,SAASC,QACrDC,UAAW,MAEXE,SAAUC,IAAIc,IAEdC,WAEApC,WAAY,WACRqC,KAAKR,SAAWQ,KAAKC,QAAQT,SAE7BQ,KAAKE,SAASF,KAAKR,SAAU,SAAUQ,KAAKG,YAC5CH,KAAKE,SAASF,KAAKI,WAAY,OAAQJ,KAAKK,kBAE5CL,KAAKE,SAASF,KAAKI,WAAY,MAAOJ,KAAKM,gBAE3CN,KAAKO,GAAG,OAAQP,KAAKQ,YAIzBF,eAAgB,SAASG,GACrB,GAAIjB,GAAWiB,EAASC,IAAI,WAE5B,IAAiBC,SAAbnB,EAAJ,CAKA,GAAIoB,GAAS,GAAIC,QAAOC,KAAKC,OACzBvB,EAASkB,IAAI,YAAYM,SACzBxB,EAASkB,IAAI,YAAYO,WAGzBC,EAAS,GAAIL,QAAOC,KAAKK,QACzBC,SAAUR,EACVd,IAAKE,KAAKF,IACVuB,MAAO7B,EAASkB,IAAI,QACpBY,KAAM,iBAGVtB,MAAKD,QAAQwB,KAAKL,KAItBb,iBAAkB,WACGM,SAAbX,KAAKF,KAIsB,IAA3BE,KAAKI,WAAWoB,QAIpBxB,KAAKI,WAAWqB,QAAQzB,KAAKM,eAAgBN,OAIjDG,WAAY,WACR,GAAiBQ,SAAbX,KAAKF,KAI6B,OAAlCE,KAAKR,SAASkB,IAAI,YAAtB,CAKA,GAAIE,GAAS,GAAIC,QAAOC,KAAKC,OACzBf,KAAKR,SAASkB,IAAI,YAClBV,KAAKR,SAASkB,IAAI,aAIFC,UAAhBX,KAAKkB,SACLlB,KAAKkB,OAAS,GAAIL,QAAOC,KAAKK,QAC1BrB,IAAKE,KAAKF,IACVuB,MAAO,gBACPC,KAAM,iBAIdtB,KAAKkB,OAAOQ,YAAYd,GAExBZ,KAAKF,IAAI6B,UAAUf,KAIvBJ,UAAW,WACP,GAAIoB,KACAC,YAAe,gBACfC,UACIC,WAAc,QAGlBC,YAAe,OACfF,UACIG,MAAS,YAETC,WAAc,iBAGlBF,YAAe,YACfF,UACIG,MAAS,cAGbJ,YAAe,SACfC,UACII,WAAc,UAGlBF,YAAe,MACfF,UACII,WAAc,UAGlBF,YAAe,kBACfF,UACII,WAAc,aAKlBC,GACAC,KAAM,GACNC,OAAQ,GAAIxB,QAAOC,KAAKC,OACpB,WACC,OAELa,OAAQA,EACRU,kBAAkB,EAGtBtC,MAAKF,IAAM,GAAIe,QAAOC,KAAKjB,IACvBG,KAAKuC,IAAIC,KAAK,eAAe9B,IAAI,GACjCyB,GAGJnC,KAAKG,aACLH,KAAKG,gBC1IbtD,YAAYI,KAAKI,KAAKoF,MAAQrE,SAAStB,WAAW6B,SAASC,QAEvDG,SAAUC,IAAIV,MACdO,UAAW,iBAEXK,QACIwD,eAAiB,SAQrBpE,MAAO,WACH,MAAOzB,aAAYqB,OAAOyE,SAAS,aAAa,MCfxD9F,YAAYI,KAAKI,KAAKuF,iBAAmBxE,SAAStB,WAAW6B,SAASC,QAClEC,UAAW,oBAEXE,SAAUC,IAAI6D,WCHlBhG,YAAYI,KAAKG,WAAW0F,WAAa1E,SAAStB,WAAWiG,eAAenE,QACxEC,UAAW,aAEXmE,UAAWnG,YAAYI,KAAKI,KAAKqB,WCHrC7B,YAAYO,WAAW6F,QAAU7E,SAAStB,WAAWiG,eAAenE,QAChEC,UAAW,WAEXmE,UAAWnG,YAAYI,KAAKI,KAAKuF,mBCHrC/F,YAAYU,MAAMmB,SAAWhB,MAAMwF,OAAOtE,QACtCC,UAAW,WAGXlB,WAAY,WACRqC,KAAKO,GAAG,cAAeP,KAAKmD,YAIhCA,UAAW,WACP,GAAIC,GAAOpD,KAAKU,IAAI,OAEpB,IAAa,OAAT0C,EAAJ,CAIA,GAAIC,KAEJA,GAAID,EAAKE,KACLC,OAAS,EACTC,MAAQ,GAGZxD,KAAKyD,OAAOJ,OCvBpBxG,YAAYU,MAAMmG,SAAWhG,MAAMwF,OAAOtE,QACtCC,UAAW,WAEX8E,UACI3C,SAAY,KACZC,UAAY,MAIhB2C,cAAe,KAGfC,MAAO,SAAS5D,GAuBZ,QAAS6D,GAAU1C,GACf,GAAIJ,GAAWI,EAAS2C,OAAO/C,SAC3BC,EAAYG,EAAS2C,OAAO9C,UAE5B+C,GACAhD,SAAUA,EACVC,UAAWA,EAIfjB,MAAKiE,IAAID,GAGTE,EAASC,QAAQH,GAIrB,QAASI,GAAQ1E,GAEbwE,EAASG,OAAO3E,GAzCpB,GAAIwE,GAAW,GAAII,QAAOC,SAGtBC,EAAUN,EAASM,SAiDvB,OA9CAvE,GAAUA,IAAYA,MAGlBA,EAAQV,SACRiF,EAAQC,KAAKxE,EAAQV,SAGrBU,EAAQP,OACR8E,EAAQE,KAAKzE,EAAQP,OAGrBO,EAAQ0E,UACRH,EAAQI,OAAO3E,EAAQ0E,UA4B3BE,UAAUC,YAAYC,mBAClBC,EAAEC,KAAKnB,EAAW9D,MAClBgF,EAAEC,KAAKb,EAASpE,OAIbwE,GAIXU,MAAO,SAASC,GACZnF,KAAK4D,cAAgBwB,YACjBJ,EAAEC,KAAKjF,KAAK6D,MAAO7D,MACnBmF,IAKRE,QAAS,WACLC,cAActF,KAAK4D,kBC9E3B/G,YAAYU,MAAMgI,KAAO7H,MAAMwF,OAAOtE,QAClCC,UAAW,SCDfhC,YAAYO,WAAW0F,WAAapF,MAAMN,WAAWwB,QACjDC,UAAW,WACX2G,MAAO3I,YAAYU,MAAMmB,WCF7B7B,YAAYO,WAAWqI,UAAY/H,MAAMN,WAAWwB,QAChDC,UAAW,WACX2G,MAAO3I,YAAYU,MAAMmG,SAGzB/F,WAAY,SAASsC,GACbA,EAAQT,WACRQ,KAAKR,SAAWS,EAAQT,SACxBQ,KAAKR,SAASe,GAAG,SAAUyE,EAAEC,KAAKjF,KAAK0F,eAAgB1F,SAK/D0F,eAAgB,SAASlG,GACrB,GAAImG,GAAa,GAAI9E,QAAOC,KAAKC,OAC7BvB,EAASkB,IAAI,YACblB,EAASkB,IAAI,aAGjBV,MAAKyB,QAAQ,SAASjC,GAClB,GAAIoG,GAAmBpG,EAASkB,IAAI,YAAYM,SAC5C6E,EAAoBrG,EAASkB,IAAI,YAAYO,UAE7C6E,EAAiB,GAAIjF,QAAOC,KAAKC,OACjC6E,EACAC,GAGAE,EAAWlF,OAAOC,KAAKkF,SAASC,UAAUC,uBAC5CP,EACAG,EAGFtG,GAASyE,IAAI,WAAY8B,KAG7B/F,KAAKmG,QAAQ,kBAAmBnG,OAIpCoG,QAAS,SAASC,GACd,GAAID,GAAUpG,KAAKsG,OAAO,SAAS9G,GAC/B,MAAOA,GAASkB,IAAI,YAAc2F,GAGtC,OAAID,GAAQ5E,OAAS,EACV4E,EAAQ,GAER,QChDnBvJ,YAAYW,WAAW+I,KAAOzJ,WAAWU,WAAWoB,QAQhD4H,MAAO,WACE9I,MAAM6H,KAAKkB,UAGZ5J,YAAYqB,OAAOyE,SAAS,UAAU,GAFtC9F,YAAYqB,OAAOyE,SAAS,UAAU,IAW9C1D,MAAO,WACH,GAAIyH,GAAY,GAAI7J,aAAYI,KAAKI,KAAKyB,KAC1CjC,aAAYG,WAAW2J,KAAKD,IAQhCpI,MAAO,WAEH,IAAKZ,MAAM6H,KAAKkB,UACZ,MAAO5J,aAAYqB,OAAOyE,SAAS,UAAU,EAGjD,IAAIiE,GAAY,GAAI/J,aAAYI,KAAKI,KAAKoF,KAC1C5F,aAAYG,WAAW2J,KAAKC,IAQhC9G,IAAK,WAED,IAAKpC,MAAM6H,KAAKkB,UACZ,MAAO5J,aAAYqB,OAAOyE,SAAS,UAAU,EAGjD,IAAInD,GAAWQ,KAAKC,QAAQT,SACxBqH,EAAa7G,KAAKC,QAAQ4G,UAE9BA,GAAWhD,OAGX,IAAI2B,GAAQ,GAAI3I,aAAYU,MAAMmB,SAG9BoI,EAAU,GAAIjK,aAAYI,KAAKI,KAAKwC,KACpCO,WAAayG,EACbrH,SAAaA,EACbgG,MAAaA,GAGjB3I,aAAYG,WAAW2J,KAAKG,IAShCjE,SAAU,WAEN,IAAKnF,MAAM6H,KAAKkB,UACZ,MAAO5J,aAAYqB,OAAOyE,SAAS,UAAU,EAGjD,IAAInD,GAAWQ,KAAKC,QAAQT,QAE5BA,GAASqE,OAGT,IAAI2B,GAAQ,GAAI3I,aAAYU,MAAMmB,SAE9B0B,EAAa,GAAIvD,aAAYO,WAAW6F,OACxC7C,GAAW2G,MAAQ,GAAIrJ,OAAMsJ,MAAMnK,YAAYU,MAAMmB,UAEzD0B,EAAW2G,MAAME,QAAQ,YAEzB7G,EAAWyD,OAEX,IAAIqD,GAAe,GAAIrK,aAAYI,KAAKI,KAAKwC,KACzCO,WAAaA,EACboF,MAAaA,GAGjB3I,aAAYG,WAAW2J,KAAKO,MCrGpCrK,YAAYS,OAAOa,QAAUC,SAAStB,WAAWqK,UAAUvI,QACvDjB,WAAY,WAmBR,QAASyG,GAAQ1E,GACb0H,MAAM1H,GAGV,QAAS2H,GAAiBC,GACtB,GAAIC,GAAkBD,EAAUlB,QAC5B,IAGAmB,IACAC,EAAkBD,GAM1B,QAASC,GAAkBD,GACvB,GAAIA,IAAoBE,EAAxB,CAGIA,EAAkBF,CAGtB,IAAI9G,GAAW,GAAI5D,aAAYU,MAAMmB,QAErC+B,GAASwD,IAAI,OAAQb,GACrB3C,EAASwD,IAAI,WAAYsD,GAEzB9G,EAASiH,OAAOC,KAAKC,EAAgBxD,IAGzC,QAASwD,GAAenH,GACpBd,QAAQC,IAAI,kBACZiH,EAAWgB,IAAIpH,GAlDnB,GAAI2C,GAAO1F,MAAM6H,KAAKkB,UAClBqB,EAAe,GAAIjL,aAAYU,MAAMmG,SAIrCmD,EAAa,GAAIhK,aAAYO,WAAW0F,UACxC+D,GAAWE,MAAQ,GAAIrJ,OAAMsJ,MAAMnK,YAAYU,MAAMmB,UAEzDmI,EAAWE,MAAME,QAAQ,WAIzB,IAAIK,GAAY,GAAIzK,aAAYO,WAAWqI,WACvCjG,SAAUsI,IAmBVL,EAAkB,IAsBtBzH,MAAKE,SAASoH,EAAW,kBAAmBD,GAG5CC,EAAUzD,QACViE,EAAajE,QAGbiE,EAAa5C,MAET,IAGJ,IAAIjF,IACAT,SAAUsI,EACVR,UAAWA,EACXT,WAAYA,EAIhB7G,MAAK+H,iBACD,GAAIlL,aAAYW,WAAW+I,KAAKtG,IAE5B,GAAa,QACbhB,MAAa,QACbX,MAAa,QACbwB,IAAa,MACb+C,SAAa"}