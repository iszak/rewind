{"version":3,"file":"app.js","sources":["../src/app.js","../src/App.js","../src/views/item/activity.js","../src/views/item/login.js","../src/views/item/map.js","../src/views/item/start.js","../src/views/item/timeline-activity.js","../src/views/item/timeline.js","../src/views/collection/activites.js","../src/views/collection/timeline.js","../src/models/activity.js","../src/models/location.js","../src/models/user.js","../src/collections/activities.js","../src/collections/locations.js","../src/controllers/main.js","../src/routers/default.js","../src/services/location.js"],"names":["Application","Marionette","addRegions","mainRegion","View","Layout","Composite","Collection","Item","Router","Model","Service","Controller","addInitializer","Parse","initialize","FacebookUtils","init","appId","channelUrl","cookie","xfbml","router","Default","Backbone","history","start","$","window","load","Activity","ItemView","extend","className","Login","template","JST","login","events","click .login","event","preventDefault","logIn","success","location","hash","error","console","log","Map","map","markers","click .tab","this","options","listenTo","renderUser","collection","renderActivities","renderActivity","on","renderMap","addClass","activity","get","undefined","latLng","google","maps","LatLng","latitude","longitude","marker","Marker","position","title","icon","push","markerLenth","length","path","Polyline","getPosition","geodesic","strokeColor","strokeOpacity","strokeWeight","setMap","onDomRefresh","toggleTab","evt","type","currentTarget","data","removeClass","navigate","forEach","setPosition","setCenter","styles","elementType","stylers","saturation","featureType","color","visibility","mapOptions","zoom","center","disableDefaultUI","$el","find","Start","click #start","TimelineActivity","tagName","timelineItem","model","Timeline","timeline","Activities","CollectionView","childView","CompositeView","childViewContainer","self","text","calculateCurrentTime","setInterval","dt","Date","time","getHours","getMinutes","getSeconds","Object","toJSON","_","clone","attributes","createdAt","updatedAt","name","Location","defaults","watchInterval","fetch","onSuccess","coords","set","deferred","resolve","onError","reject","jQuery","Deferred","promise","done","fail","complete","always","navigator","geolocation","getCurrentPosition","bind","watch","interval","unwatch","clearInterval","User","Locations","distanceUpdate","userLatLng","point","locationLatitude","locationLongitude","locationLatLng","distance","geometry","spherical","computeDistanceBetween","trigger","closest","threshold","filter","Main","index","current","loginView","show","startView","activities","mapView","timelineView","AppRouter","onDistanceUpdate","locations","closestLocation","currentLocation","onClosestLocation","user","save","then","onActivitySave","add","userLocation","query","Query","include","equalTo","processAppRoutes","prototype","Events"],"mappings":"AAAA,GAAIA,aAAc,GAAIC,YAAWD,WAEjCA,aAAYE,YAAYC,WAAY,UAEpCH,YAAYI,MACRC,UACAC,aACAC,cACAC,SAGJR,YAAYO,cACZP,YAAYS,UACZT,YAAYU,SACZV,YAAYW,WAEZX,YAAYY,cAMZZ,YAAYa,eAAe,WACvBC,MAAMC,WAAW,2CAA4C,4CAE7DD,MAAME,cAAcC,MAChBC,MAAa,mBACbC,WAAa,6CACbC,QAAa,EACbC,OAAa,MAMrBrB,YAAYa,eAAe,WACvBb,YAAYsB,OAAS,GAAItB,aAAYS,OAAOc,UAIhDvB,YAAYa,eAAe,WACvBW,SAASC,QAAQC,UAIrBC,EAAEC,QAAQC,KAAK,WACX7B,YAAY0B,SC9ChB,IAAI1B,aAAc,GAAIC,YAAWD,WAEjCA,aAAYE,YAAYC,WAAY,UAEpCH,YAAYI,MACRC,UACAC,aACAC,cACAC,SAGJR,YAAYO,cACZP,YAAYS,UACZT,YAAYU,SACZV,YAAYW,WAEZX,YAAYY,cAMZZ,YAAYa,eAAe,WACvBC,MAAMC,WAAW,2CAA4C,4CAE7DD,MAAME,cAAcC,MAChBC,MAAa,mBACbC,WAAa,6CACbC,QAAa,EACbC,OAAa,MAMrBrB,YAAYa,eAAe,WACvBb,YAAYsB,OAAS,GAAItB,aAAYS,OAAOc,UAIhDvB,YAAYa,eAAe,WACvBW,SAASC,QAAQC,UAIrBC,EAAEC,QAAQC,KAAK,WACX7B,YAAY0B,UC9ChB1B,YAAYI,KAAKI,KAAKsB,SAAWN,SAASvB,WAAW8B,SAASC,QAC1DC,UAAW,aCDfjC,YAAYI,KAAKI,KAAK0B,MAAQV,SAASvB,WAAW8B,SAASC,QAEvDG,SAAUC,IAAIC,MACdJ,UAAW,SAEXlB,WAAY,aAIZuB,QACIC,eAAgB,SAWpBF,MAAO,SAASG,GACZA,EAAMC,iBAEN3B,MAAME,cAAc0B,MAAM,SACtBC,QAAS,WACNf,OAAOgB,SAASC,KAAO,UAE1BC,MAAO,WACHC,QAAQC,IAAI,eC7B5BhD,YAAYI,KAAKI,KAAKyC,IAAMzB,SAASvB,WAAW8B,SAASC,QACrDC,UAAW,MAEXE,SAAUC,IAAIc,IAEdC,WAEAb,QACIc,aAAe,aAGnBrC,WAAY,WACRsC,KAAKT,SAAWS,KAAKC,QAAQV,SAE7BS,KAAKE,SAASF,KAAKT,SAAU,SAAUS,KAAKG,YAC5CH,KAAKE,SAASF,KAAKI,WAAY,OAAQJ,KAAKK,kBAE5CL,KAAKE,SAASF,KAAKI,WAAY,MAAOJ,KAAKM,gBAE3CN,KAAKO,GAAG,OAAQP,KAAKQ,WAErBlC,EAAE,YAAYmC,SAAS,WAI3BH,eAAgB,SAASI,GACrB,GAAInB,GAAWmB,EAASC,IAAI,WAE5B,IAAiBC,SAAbrB,EAAJ,CAKA,GAAIsB,GAAS,GAAIC,QAAOC,KAAKC,OACzBzB,EAASoB,IAAI,YAAYM,SACzB1B,EAASoB,IAAI,YAAYO,WAGzBC,EAAS,GAAIL,QAAOC,KAAKK,QACzBC,SAAUR,EACVhB,IAAKG,KAAKH,IACVyB,MAAO/B,EAASoB,IAAI,QACpBY,KAAM,iBAGVvB,MAAKF,QAAQ0B,KAAKL,EAGlB,IAAIM,GAAczB,KAAKF,QAAQ4B,MAC/B,IAAoB,IAAhBD,EAEA,WADA/B,SAAQC,IAAI,SAKhB,IAAIgC,GAAO,GAAIb,QAAOC,KAAKa,UACvBD,MACI3B,KAAKF,QAAQ2B,EAAc,GAAGI,cAC9B7B,KAAKF,QAAQ2B,EAAc,GAAGI,eAElCC,UAAU,EACVC,YAAa,UACbC,cAAe,GACfC,aAAc,GAGlBN,GAAKO,OAAOlC,KAAKH,OAGrBsC,aAAc,WACV7D,EAAE,YAAYmC,SAAS,WAI3B2B,UAAW,SAASC,GAEhB,GAAIC,GAAOhE,EAAE+D,EAAIE,eAAeC,KAAK,OAErClE,GAAE,QAAQmE,YAAY,UAEtBnE,EAAE+D,EAAIE,eAAe9B,SAAS,UAEjB,QAAT6B,EACA3F,YAAYsB,OAAOyE,SAAS,QAAQ,GACpB,aAATJ,GACP3F,YAAYsB,OAAOyE,SAAS,aAAa,IAMjDrC,iBAAkB,WACGO,SAAbZ,KAAKH,KAIsB,IAA3BG,KAAKI,WAAWsB,SAIpB1B,KAAKI,WAAWuC,QAAQ3C,KAAKM,eAAgBN,MAE7CN,QAAQC,IAAIK,KAAKI,WAAWsB,UAIhCvB,WAAY,WACR,GAAiBS,SAAbZ,KAAKH,KAI6B,OAAlCG,KAAKT,SAASoB,IAAI,YAAtB,CAKA,GAAIE,GAAS,GAAIC,QAAOC,KAAKC,OACzBhB,KAAKT,SAASoB,IAAI,YAClBX,KAAKT,SAASoB,IAAI,aAIFC,UAAhBZ,KAAKmB,SACLnB,KAAKmB,OAAS,GAAIL,QAAOC,KAAKK,QAC1BvB,IAAKG,KAAKH,IACVyB,MAAO,gBACPC,KAAM,iBAIdvB,KAAKmB,OAAOyB,YAAY/B,GAExBb,KAAKH,IAAIgD,UAAUhC,KAIvBL,UAAW,WACP,GAAIsC,KACAC,YAAe,gBACfC,UACIC,WAAc,QAGlBC,YAAe,OACfF,UACIG,MAAS,YAETC,WAAc,iBAGlBF,YAAe,YACfF,UACIG,MAAS,cAGbJ,YAAe,SACfC,UACII,WAAc,UAGlBF,YAAe,MACfF,UACII,WAAc,UAGlBF,YAAe,kBACfF,UACII,WAAc,aAKlBC,GACAC,KAAM,GACNC,OAAQ,GAAIzC,QAAOC,KAAKC,OACpB,WACC,OAEL8B,OAAQA,EACRU,kBAAkB,EAGtBxD,MAAKH,IAAM,GAAIiB,QAAOC,KAAKnB,IACvBI,KAAKyD,IAAIC,KAAK,eAAe/C,IAAI,GACjC0C,GAGJrD,KAAKG,aACLH,KAAKK,sBC5Lb1D,YAAYI,KAAKI,KAAKwG,MAAQxF,SAASvB,WAAW8B,SAASC,QAEvDG,SAAUC,IAAIV,MACdO,UAAW,iBAEXK,QACI2E,eAAiB,SAQrBvF,MAAO,WACH,MAAO1B,aAAYsB,OAAOyE,SAAS,aAAa,MCfxD/F,YAAYI,KAAKI,KAAK0G,iBAAmB1F,SAASvB,WAAW8B,SAASC,QAClEC,UAAW,2BAEXkF,QAAS,KAEThF,SAAUC,IAAIgF,aAEdrG,WAAY,WACRgC,QAAQC,IAAIK,KAAKgE,QAIrB3D,iBAAkB,WACGO,SAAbZ,KAAKH,KAIsB,IAA3BG,KAAKI,WAAWsB,QAIpB1B,KAAKI,WAAWuC,QAAQ3C,KAAKM,eAAgBN,SCrBrDrD,YAAYI,KAAKI,KAAK8G,SAAW9F,SAASvB,WAAW8B,SAASC,QAC1DG,SAAUC,IAAImF,SAEdxG,WAAY,WACRgC,QAAQC,IAAIK,KAAKI,aAIrBnB,QACIc,aAAe,aAInBoC,aAAc,WACV7D,EAAE,iBAAiBmC,SAAS,WAIhC2B,UAAW,SAASC,GAEhB,GAAIC,GAAOhE,EAAE+D,EAAIE,eAAeC,KAAK,OAErClE,GAAE,QAAQmE,YAAY,UAEtBnE,EAAE+D,EAAIE,eAAe9B,SAAS,UAEjB,QAAT6B,EACA3F,YAAYsB,OAAOyE,SAAS,QAAQ,GACpB,aAATJ,GACP3F,YAAYsB,OAAOyE,SAAS,aAAa,MC7BrD/F,YAAYI,KAAKG,WAAWiH,WAAahG,SAASvB,WAAWwH,eAAezF,QACxEC,UAAW,aAEXyF,UAAW1H,YAAYI,KAAKI,KAAKsB,WCHrC9B,YAAYI,KAAKG,WAAW+G,SAAW9F,SAASvB,WAAW0H,cAAc3F,QAErEG,SAAUC,IAAImF,SAEdG,UAAW1H,YAAYI,KAAKI,KAAK0G,iBACjCU,mBAAoB,SACpB3F,UAAW,qBAEXK,QACIc,aAAe,aAInBrC,WAAW,aAIXyE,aAAc,WACV,GAAIqC,GAAOxE,IAEX1B,GAAE,iBAAiBmC,SAAS,UAC5BnC,EAAE,SAASmG,KAAMzE,KAAK0E,wBAEtBC,YAAY,WACRrG,EAAE,SAASmG,KAAMD,EAAKE,yBACvB,MAQPA,qBAAsB,WAClB,GAAIE,GAAK,GAAIC,MACTC,EAAOF,EAAGG,WAAa,IAAMH,EAAGI,aAAe,IAAMJ,EAAGK,YAC5D,OAAOH,IAIX1C,UAAW,SAASC,GAEhB,GAAIC,GAAOhE,EAAE+D,EAAIE,eAAeC,KAAK,OAErClE,GAAE,QAAQmE,YAAY,UAEtBnE,EAAE+D,EAAIE,eAAe9B,SAAS,UAEjB,QAAT6B,EACA3F,YAAYsB,OAAOyE,SAAS,QAAQ,GACpB,aAATJ,GACP3F,YAAYsB,OAAOyE,SAAS,aAAa,MCnDrD/F,YAAYU,MAAMoB,SAAWhB,MAAMyH,OAAOvG,QACtCC,UAAW,WAEXuG,OAAQ,WACJ,GAAI3C,GAAO4C,EAAEC,MAAMrF,KAAKsF,WAaxB,OAXA9C,GAAK+C,UAAYvF,KAAKuF,UACtB/C,EAAKgD,UAAYxF,KAAKwF,UAGlBhD,EAAKjD,SADLiD,EAAKjD,SACWS,KAAKW,IAAI,YAAYwE,UAGjCM,KAAM,IAIPjD,KCjBf7F,YAAYU,MAAMqI,SAAWjI,MAAMyH,OAAOvG,QACtCC,UAAW,WAEX+G,UACI1E,SAAY,KACZC,UAAY,MAIhB0E,cAAe,KAGfC,MAAO,SAAS5F,GAuBZ,QAAS6F,GAAUzE,GACf,GAAIJ,GAAWI,EAAS0E,OAAO9E,SAC3BC,EAAYG,EAAS0E,OAAO7E,UAE5BsB,GACAvB,SAAUA,EACVC,UAAWA,EAIflB,MAAKgG,IAAIxD,GAGTyD,EAASC,QAAQ1D,GAIrB,QAAS2D,GAAQ1G,GAEbwG,EAASG,OAAO3G,GAzCpB,GAAIwG,GAAW,GAAII,QAAOC,SAGtBC,EAAUN,EAASM,SAiDvB,OA9CAtG,GAAUA,IAAYA,MAGlBA,EAAQX,SACRiH,EAAQC,KAAKvG,EAAQX,SAGrBW,EAAQR,OACR8G,EAAQE,KAAKxG,EAAQR,OAGrBQ,EAAQyG,UACRH,EAAQI,OAAO1G,EAAQyG,UA4B3BE,UAAUC,YAAYC,mBAClB1B,EAAE2B,KAAKjB,EAAW9F,MAClBoF,EAAE2B,KAAKZ,EAASnG,OAIbuG,GAIXS,MAAO,SAASC,GACZjH,KAAK4F,cAAgBjB,YACjBS,EAAE2B,KAAK/G,KAAK6F,MAAO7F,MACnBiH,IAKRC,QAAS,WACLC,cAAcnH,KAAK4F,kBC9E3BjJ,YAAYU,MAAM+J,KAAO3J,MAAMyH,OAAOvG,QAClCC,UAAW,SCDfjC,YAAYO,WAAWiH,WAAa1G,MAAMP,WAAWyB,QACjDC,UAAW,WACXoF,MAAOrH,YAAYU,MAAMoB,WCF7B9B,YAAYO,WAAWmK,UAAY5J,MAAMP,WAAWyB,QAChDC,UAAW,WACXoF,MAAOrH,YAAYU,MAAMqI,SAGzBhI,WAAY,SAASuC,GACbA,EAAQV,WACRS,KAAKT,SAAWU,EAAQV,SACxBS,KAAKT,SAASgB,GAAG,SAAU6E,EAAE2B,KAAK/G,KAAKsH,eAAgBtH,SAK/DsH,eAAgB,SAAS/H,GACrB,GAAIgI,GAAa,GAAIzG,QAAOC,KAAKC,OAC7BzB,EAASoB,IAAI,YACbpB,EAASoB,IAAI,aAGjBX,MAAK2C,QAAQ,SAASpD,GAClB,GAAIiI,GAAQjI,EAASoB,IAAI,WAEzB,IAAcC,SAAV4G,EAAJ,CAIA,GAAIC,GAAmBD,EAAMvG,SACzByG,EAAoBF,EAAMtG,UAE1ByG,EAAiB,GAAI7G,QAAOC,KAAKC,OACjCyG,EACAC,GAGAE,EAAW9G,OAAOC,KAAK8G,SAASC,UAAUC,uBAC5CR,EACAI,EAGFpI,GAASyG,IAAI,WAAY4B,MAG7B5H,KAAKgI,QAAQ,kBAAmBhI,OAIpCiI,QAAS,SAASC,GACd,GAAID,GAAUjI,KAAKmI,OAAO,SAAS5I,GAC/B,MAAOA,GAASoB,IAAI,YAAcuH,GAGtC,OAAID,GAAQvG,OAAS,EACVuG,EAAQ,GAER,QCtDnBtL,YAAYY,WAAW6K,KAAOxL,WAAWW,WAAWoB,QAQhD0J,MAAO,WACE5K,MAAM2J,KAAKkB,UAGZ3L,YAAYsB,OAAOyE,SAAS,UAAU,GAFtC/F,YAAYsB,OAAOyE,SAAS,UAAU,IAW9C1D,MAAO,WACH,GAAIuJ,GAAY,GAAI5L,aAAYI,KAAKI,KAAK0B,KAC1ClC,aAAYG,WAAW0L,KAAKD,IAQhClK,MAAO,WAEH,IAAKZ,MAAM2J,KAAKkB,UACZ,MAAO3L,aAAYsB,OAAOyE,SAAS,UAAU,EAGjD,IAAI+F,GAAY,GAAI9L,aAAYI,KAAKI,KAAKwG,KAC1ChH,aAAYG,WAAW0L,KAAKC,IAQhC5I,IAAK,WAED,IAAKpC,MAAM2J,KAAKkB,UACZ,MAAO3L,aAAYsB,OAAOyE,SAAS,UAAU,EAGjD,IAAInD,GAAWS,KAAKC,QAAQV,SACxBmJ,EAAa1I,KAAKC,QAAQyI,WAG1B1E,EAAQ,GAAIrH,aAAYU,MAAMoB,SAG9BkK,EAAU,GAAIhM,aAAYI,KAAKI,KAAKyC,KACpCQ,WAAasI,EACbnJ,SAAaA,EACbyE,MAAaA,GAGjBrH,aAAYG,WAAW0L,KAAKG,IAShCzE,SAAU,WAEN,IAAKzG,MAAM2J,KAAKkB,UACZ,MAAO3L,aAAYsB,OAAOyE,SAAS,UAAU,EAGjD,IAAInD,GAAWS,KAAKC,QAAQV,SACxBmJ,EAAa1I,KAAKC,QAAQyI,WAG1B1E,EAAQ,GAAIrH,aAAYU,MAAMoB,SAG9BmK,EAAe,GAAIjM,aAAYI,KAAKG,WAAW+G,UAC/C7D,WAAasI,EACbnJ,SAAaA,EACbyE,MAAaA,GAIjBrH,aAAYG,WAAW0L,KAAKI,MC9FpCjM,YAAYS,OAAOc,QAAUC,SAASvB,WAAWiM,UAAUlK,QACvDjB,WAAY,WAmBR,QAASyI,MAKT,QAAS2C,GAAiBC,GACtB,GAAIC,GAAkBD,EAAUd,QAC5B,IAGoB,QAApBe,IAKJtJ,QAAQC,IAAI,mBAAoBqJ,GAE5BA,IAAoBC,IAIxBA,EAAkBD,EAElBE,EAAkBF,KAItB,QAASE,GAAkBF,GACvB,GAAItI,GAAW,GAAI/D,aAAYU,MAAMoB,QAErCiC,GAASsF,IAAI,OAAQmD,GACrBzI,EAASsF,IAAI,WAAYgD,GAEzBtI,EAAS0I,OAAOC,KAAKC,EAAgBnD,GAGzC,QAASmD,GAAe5I,GACpBhB,QAAQC,IAAI,kBACZ+I,EAAWa,IAAI7I,GAvDnB,GAAIyI,GAAO1L,MAAM2J,KAAKkB,UAClBkB,EAAe,GAAI7M,aAAYU,MAAMqI,SAIrCgD,EAAa,GAAI/L,aAAYO,WAAWiH,UACxCuE,GAAWe,MAAQ,GAAIhM,OAAMiM,MAAM/M,YAAYU,MAAMoB,UAEzDiK,EAAWe,MAAME,SAAS,WAAY,SACtCjB,EAAWe,MAAMG,QAAQ,OAAQT,EAGjC,IAAIJ,GAAY,GAAIpM,aAAYO,WAAWmK,WACvC9H,SAAUiK,IAQVP,EAAkB,IAsCtBjJ,MAAKE,SAAS6I,EAAW,kBAAmBD,GAG5CC,EAAUlD,QACV2D,EAAa3D,QACb6C,EAAW7C,QAGX2D,EAAaxC,MAET,IAGJ,IAAI/G,IACAV,SAAUiK,EACVT,UAAWA,EACXL,WAAYA,EAIhB1I,MAAK6J,iBACD,GAAIlN,aAAYY,WAAW6K,KAAKnI,IAE5B,GAAa,QACbjB,MAAa,QACbX,MAAa,QACbwB,IAAa,MACbqE,SAAa,gBCzF7BvH,YAAYW,QAAQoI,SAAW,aAK/BN,EAAEzG,OAAOhC,YAAYW,QAAQoI,SAASoE,UAAW3L,SAAS4L"}