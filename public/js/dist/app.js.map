{"version":3,"file":"app.js","sources":["../src/App.js","../src/views/item/activity.js","../src/views/item/login.js","../src/views/item/map.js","../src/views/item/start.js","../src/views/collection/activities.js","../src/models/activity.js","../src/models/location.js","../src/models/user.js","../src/collections/activities.js","../src/collections/locations.js","../src/controllers/main.js","../src/routers/default.js"],"names":["Application","Marionette","addRegions","mainRegion","View","Layout","Composite","Collection","Item","Router","Model","Controller","addInitializer","Parse","initialize","FacebookUtils","init","appId","channelUrl","cookie","xfbml","router","Default","Backbone","history","start","$","window","load","Activity","ItemView","extend","className","Login","template","JST","login","events","click .login","event","preventDefault","logIn","success","location","hash","error","alert","Map","map","this","on","renderMap","updateMap","options","get","latLng","google","maps","LatLng","marker","Marker","position","title","setCenter","styles","elementType","stylers","saturation","featureType","color","visibility","mapOptions","zoom","center","disableDefaultUI","$el","find","onShow","fetch","done","_","bind","Start","Activities","CollectionView","childView","Object","Location","defaults","latitude","longitude","watchInterval","onSuccess","coords","data","set","deferred","resolve","onError","reject","jQuery","Deferred","promise","fail","complete","always","navigator","geolocation","getCurrentPosition","watch","interval","setInterval","unwatch","clearInterval","User","model","Locations","updateUserLocation","userLocation","updateUserLatLng","calculateDistances","userLatLng","forEach","calculateDistance","locationLatitude","locationLongitude","locationLatLng","distance","geometry","spherical","computeDistanceBetween","closest","threshold","filter","length","Main","index","current","navigate","loginView","show","startView","collection","query","Query","then","mapView","timeline","activitiesView","AppRouter","onLocationsLoad","locations","onLocationChange","closestLocation","onClosestLocation","activity","user","save","onActivitySave","console","log","processAppRoutes"],"mappings":"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"}